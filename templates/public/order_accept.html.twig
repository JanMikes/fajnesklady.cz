{% extends 'user/layout.html.twig' %}

{% block title %}Přijetí smlouvy - Fajné Sklady{% endblock %}

{% block content %}
    {# Breadcrumb #}
    <nav class="mb-6">
        <ol class="flex items-center space-x-2 text-sm text-gray-600">
            <li><a href="{{ path('app_home') }}" class="hover:text-accent">Domů</a></li>
            <li><span class="mx-2">/</span></li>
            <li><a href="{{ path('public_place_detail', {id: place.id}) }}" class="hover:text-accent">{{ place.name }}</a></li>
            <li><span class="mx-2">/</span></li>
            <li class="text-gray-900 font-medium">Přijetí smlouvy</li>
        </ol>
    </nav>

    <div class="max-w-2xl mx-auto">
        <div class="card">
            <div class="card-body">
                <h1 class="text-2xl font-bold text-gray-900 mb-6">Přijetí smluvních podmínek</h1>

                <p class="text-sm text-gray-600 mb-6">
                    Před pokračováním k platbě si prosím přečtěte a odsouhlaste smluvní podmínky pronájmu.
                </p>

                {# Order Summary #}
                <div class="bg-gray-50 rounded-lg p-4 mb-6">
                    <h2 class="font-semibold text-gray-900 mb-3">Shrnutí objednávky</h2>

                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Pobočka</span>
                            <span class="font-medium">{{ place.name }}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Adresa</span>
                            <span class="font-medium">{{ place.address }}, {{ place.city }}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Skladová jednotka</span>
                            <span class="font-medium">{{ storageType.name }} - {{ storage.number }}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Rozměry</span>
                            <span class="font-medium">{{ storageType.dimensionsInMeters }}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Období pronájmu</span>
                            <span class="font-medium">
                                {{ order.startDate|date('d.m.Y') }}
                                -
                                {% if order.endDate %}
                                    {{ order.endDate|date('d.m.Y') }}
                                {% else %}
                                    neurčito
                                {% endif %}
                            </span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Cena</span>
                            <span class="font-medium text-accent">{{ order.totalPriceInCzk|number_format(2, ',', ' ') }} Kč</span>
                        </div>
                    </div>
                </div>

                {# Contract Terms #}
                <div class="border border-gray-200 rounded-lg p-4 mb-6 max-h-64 overflow-y-auto bg-white">
                    <h3 class="font-semibold text-gray-900 mb-3">Smluvní podmínky</h3>

                    <div class="prose prose-sm text-gray-600">
                        <p><strong>1. Předmět smlouvy</strong></p>
                        <p>Pronajímatel přenechává nájemci do užívání skladovou jednotku č. {{ storage.number }}
                           v objektu {{ place.name }}, {{ place.address }}, {{ place.city }}.</p>

                        <p><strong>2. Doba pronájmu</strong></p>
                        <p>Pronájem začíná dnem {{ order.startDate|date('d.m.Y') }}
                           {% if order.endDate %}
                               a končí dnem {{ order.endDate|date('d.m.Y') }}.
                           {% else %}
                               a trvá na dobu neurčitou. Obě strany mohou smlouvu vypovědět s měsíční výpovědní lhůtou.
                           {% endif %}
                        </p>

                        <p><strong>3. Cena pronájmu</strong></p>
                        <p>Cena pronájmu činí {{ order.totalPriceInCzk|number_format(2, ',', ' ') }} Kč.</p>

                        <p><strong>4. Pravidla užívání</strong></p>
                        <ul>
                            <li>Nájemce se zavazuje užívat skladovou jednotku pouze k uskladnění vlastních věcí.</li>
                            <li>Je zakázáno skladovat hořlavé, výbušné nebo nebezpečné látky.</li>
                            <li>Je zakázáno skladovat potraviny a jiné zboží podléhající zkáze.</li>
                            <li>Nájemce má přístup ke skladové jednotce 24 hodin denně, 7 dní v týdnu.</li>
                        </ul>

                        <p><strong>5. Odpovědnost</strong></p>
                        <p>Pronajímatel nenese odpovědnost za škody způsobené vyšší mocí. Nájemce je povinen
                           uzamykat skladovou jednotku vlastním zámkem.</p>

                        <p><strong>6. Závěrečná ustanovení</strong></p>
                        <p>Přijetím těchto podmínek nájemce potvrzuje, že se seznámil s provozním řádem
                           a zavazuje se jej dodržovat.</p>
                    </div>
                </div>

                {# Accept Form #}
                <form method="post">
                    <div class="mb-6">
                        <label class="flex items-start cursor-pointer">
                            <input type="checkbox"
                                   name="accept_contract"
                                   value="1"
                                   class="mt-1 mr-3 h-4 w-4 text-accent border-gray-300 rounded focus:ring-accent"
                                   required>
                            <span class="text-sm text-gray-700">
                                Souhlasím se smluvními podmínkami a potvrzuji, že jsem si přečetl/a
                                všechny informace o pronájmu skladové jednotky.
                            </span>
                        </label>
                    </div>

                    <button type="submit" class="btn btn-primary btn-lg w-full">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        Souhlasím a pokračuji k platbě
                    </button>
                </form>
            </div>
        </div>
    </div>
{% endblock %}
